<section class="container">
  <ng-container
    *ngIf="activity$ | observableWithStatus | async as obs"
    [ngSwitch]="obs.status"
  >
    <ng-template [ngSwitchCase]="ObsStatus.Loading">
      <div class="center-block-content pt-5">
        <div class="center-flex-content">
          <mat-spinner></mat-spinner>
        </div>
        <h4 class="text-center mt-4 empty-list-text">Cargando actividad...</h4>
      </div>
    </ng-template>
    <ng-template [ngSwitchCase]="ObsStatus.Success">
      <div *ngIf="obs.value as activity">
        <h1 class="text-center">Actividad NÂ° {{ activity.code }}</h1>
        <h3>
          Actividad agendada para visitar el cliente
          {{ activity.client.firstName }} {{ activity.client.lastName }} en la
          fecha de {{ activity.date | date: "MMMM d, y, h:mm a" }} con una
          periodicidad de visita {{ activity.periodicity | periodicity }}.
        </h3>
        <mat-divider></mat-divider>
        <span>Se solicitaron los siguientes servicios:</span>
        <div>
          <mat-list>
            <mat-list-item *ngFor="let service of activity.services">
              <mat-icon style="margin-right: 7px">label</mat-icon>
              {{ service.code }} - {{ service.name }} :
              {{ service.cost | currency: "COP":"symbol-narrow" }}
            </mat-list-item>
          </mat-list>
        </div>
        <span>Se asiganron los siguientes empleados:</span>
        <div>
          <mat-list>
            <mat-list-item *ngFor="let employee of activity.employees">
              <mat-icon style="margin-right: 7px">assignment_ind</mat-icon>
              {{ employee.id }} - {{ employee.firstName }}
              {{ employee.lastName }}
            </mat-list-item>
          </mat-list>
        </div>
        <span
          >El estado actual de esta actividad es
          {{ activity.state | activityState }}.</span
        >
      </div>
    </ng-template>
  </ng-container>
</section>
